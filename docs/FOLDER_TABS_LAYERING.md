# Folder Tab UI 组件设计与层叠逻辑

## 一、设计思路

要做出「文件夹页签」效果：整条是灰底，**当前选中的那一格**像被抽出来的文件夹——白底、略上浮、带斜边。

- **灰条**：整条铺满，贴容器左右和上边，**不**按「左半块 / 右半块」分开画两块梯形，避免中间出现白色倒三角。
- **白块**：只有「当前激活的那一半」画一块**白色梯形**，叠在灰条上面，斜边在中间分隔处。

所以：**active 态 = 在灰条之上多画一层「白色梯形」**，不是改灰条形状。

---

## 二、层叠顺序（从下到上）

| 层级 | 元素 | 说明 |
|------|------|------|
| **0** | `grayBar` | 一整条灰色矩形，`absoluteFill`，上边两角圆角。贴满容器，无梯形。 |
| **1** | `ActiveGroupWhiteTrapezoid` | **仅激活时存在**。一块 SVG 梯形，占左半或右半宽度，盖在灰条上。左半块或右半块二选一。 |
| **2** | 两个 `group` | 各占一半宽度，里面是文字 + 水花 + 下划线，背景透明，看到的是下面的灰或白。 |
| **3**（可选） | `groupBottomMask` | 激活组底部一条细白条，遮住白梯形与下方卡片的接缝。 |

结论：**active 态确实是「加了一层」白色梯形**，不是只改颜色。

---

## 三、左半边错、右半边对的原因

- **右半边**：  
  右半块的梯形 path 是「右边垂直、(100,0)-(100,100)」，再给包住它的 View 设 `borderTopRightRadius`，所以右上角是圆角，和容器右边、灰条圆角一致，看起来对。

- **左半边**：  
  左半块如果 path 的**左边**是斜线（例如 (0,100)-(12,0)），就会出现：
  1. 白色梯形的左缘和容器左边缘不重合，中间有一道斜缝，像「割裂」、没贴边。
  2. 左上角是梯形自带的尖角，没有和灰条一样的**圆角**，看起来就像「错误的梯形」而不是「贴着左边边缘的圆角」。

所以：**不是「不该加新层」**，而是**左半块这一层的形状设错了**——要把左缘做成垂直贴边，并且用圆角裁剪（和右半边对称处理）。

---

## 四、正确做法（与右半边统一）

- **左半块**  
  - path：左缘**垂直**贴容器，例如 `M 0 0 L 0 100 L 88 100 L 100 0 Z`（左边 (0,0)-(0,100)）。  
  - 包住白梯形的 View：`overflow: 'hidden'` + `borderTopLeftRadius: TAB_BAR_RADIUS`，用圆角裁掉左上角，和灰条左上圆角一致。  

- **右半块**  
  - 保持现有 path（右缘垂直）+ View 的 `borderTopRightRadius`，继续用圆角裁右上角。

这样：**层叠逻辑不变（active 仍是加一层白梯形）**，只是左半块这一层的形状和圆角与右半边统一，左半边就会是「贴着左边边缘的圆角」而不是错误的梯形尖角。
